<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tvb.config.settings &mdash; The Virtual Brain 1.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="The Virtual Brain 1.1 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">The Virtual Brain 1.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for tvb.config.settings</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># TheVirtualBrain-Framework Package. This package holds all Data Management, and </span>
<span class="c"># Web-UI helpful to run brain-simulations. To use it, you also need do download</span>
<span class="c"># TheVirtualBrain-Scientific Package (for simulators). See content of the</span>
<span class="c"># documentation-folder for more details. See also http://www.thevirtualbrain.org</span>
<span class="c">#</span>
<span class="c"># (c) 2012-2013, Baycrest Centre for Geriatric Care (&quot;Baycrest&quot;)</span>
<span class="c">#</span>
<span class="c"># This program is free software; you can redistribute it and/or modify it under </span>
<span class="c"># the terms of the GNU General Public License version 2 as published by the Free</span>
<span class="c"># Software Foundation. This program is distributed in the hope that it will be</span>
<span class="c"># useful, but WITHOUT ANY WARRANTY; without even the implied warranty of </span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public</span>
<span class="c"># License for more details. You should have received a copy of the GNU General </span>
<span class="c"># Public License along with this program; if not, you can download it here</span>
<span class="c"># http://www.gnu.org/licenses/old-licenses/gpl-2.0</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c">#   CITATION:</span>
<span class="c"># When using The Virtual Brain for scientific publications, please cite it as follows:</span>
<span class="c">#</span>
<span class="c">#   Paula Sanz Leon, Stuart A. Knock, M. Marmaduke Woodman, Lia Domide,</span>
<span class="c">#   Jochen Mersmann, Anthony R. McIntosh, Viktor Jirsa (2013)</span>
<span class="c">#       The Virtual Brain: a simulator of primate brain network dynamics.</span>
<span class="c">#   Frontiers in Neuroinformatics (7:10. doi: 10.3389/fninf.2013.00010)</span>
<span class="c">#</span>
<span class="c">#</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">TVB global configurations are predefined/read from here.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">bin</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">platform</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">Popen</span><span class="p">,</span> <span class="n">PIPE</span>
<span class="kn">from</span> <span class="nn">tvb.basic.profile</span> <span class="kn">import</span> <span class="n">TvbProfile</span> <span class="k">as</span> <span class="n">tvb_profile</span>
<span class="kn">from</span> <span class="nn">tvb.basic.config.utils</span> <span class="kn">import</span> <span class="n">ClassProperty</span><span class="p">,</span> <span class="n">EnhancedDictionary</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>


<div class="viewcode-block" id="settings_loaded"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.settings_loaded">[docs]</a><span class="k">def</span> <span class="nf">settings_loaded</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Annotation to check if file settings are loaded before returning attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">dec</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>        
        <span class="k">def</span> <span class="nf">deco</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">b</span><span class="p">):</span>            
            <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">FILE_SETTINGS</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">read_config_file</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">deco</span>
    <span class="k">return</span> <span class="n">dec</span>


</div>
<div class="viewcode-block" id="find_file"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.find_file">[docs]</a><span class="k">def</span> <span class="nf">find_file</span><span class="p">(</span><span class="n">target_file</span><span class="p">,</span> <span class="n">root_folder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search for a file in a folder directory. Return the folder in which</span>
<span class="sd">    the file can be found.</span>
<span class="sd">    :param target_file: the name of the file that is searched</span>
<span class="sd">    :param root_folder: the top lever folder from which to start searching in all it&#39;s \</span>
<span class="sd">                        subdirectories</span>
<span class="sd">        </span>
<span class="sd">    :returns: the name of the folder in which the file can be found</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root_folder</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">file_n</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_n</span> <span class="o">==</span> <span class="n">target_file</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">root</span>


</div>
<div class="viewcode-block" id="setup_tk_tcl_environ"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.setup_tk_tcl_environ">[docs]</a><span class="k">def</span> <span class="nf">setup_tk_tcl_environ</span><span class="p">(</span><span class="n">root_folder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a root folder to look in, find the required configuration files</span>
<span class="sd">    for TCL/TK and set the proper environmental variables so everything works</span>
<span class="sd">    fine in the distribution package.</span>
<span class="sd">    </span>
<span class="sd">    :param root_folder: the top folder from which to start looking for the</span>
<span class="sd">        required configuration files</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tk_folder</span> <span class="o">=</span> <span class="n">find_file</span><span class="p">(</span><span class="s">&#39;tk.tcl&#39;</span><span class="p">,</span> <span class="n">root_folder</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tk_folder</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;TK_LIBRARY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tk_folder</span>
    <span class="n">tcl_folder</span> <span class="o">=</span> <span class="n">find_file</span><span class="p">(</span><span class="s">&#39;init.tcl&#39;</span><span class="p">,</span> <span class="n">root_folder</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tcl_folder</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;TCL_LIBRARY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tcl_folder</span>


</div>
<div class="viewcode-block" id="BaseProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile">[docs]</a><span class="k">class</span> <span class="nc">BaseProfile</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class handling correct settings to be loaded.</span>
<span class="sd">    Contains default values for all settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># I. Attributes that are going to be set at initialization time:</span>
    <span class="n">MPLH5_Server_Thread</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#The settings loaded from the configuration file. At first import, if this</span>
    <span class="c">#variable is None, it will try to load the settings from the TVB_CONFIG_FILE</span>
    <span class="n">FILE_SETTINGS</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">MAGIC_NUMBER</span> <span class="o">=</span> <span class="mi">9</span>


    <span class="c"># II. Attributes with value not changeable from settings page:</span>
    <span class="n">DB_CURRENT_VERSION</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="c"># Overwrite number of connections to the DB. </span>
    <span class="c"># Otherwise might reach PostgreSQL limit when launching multiple concurrent operations.</span>
    <span class="c"># MAX_DB_CONNECTION default value will be used for WEB  </span>
    <span class="c"># When launched on cluster, the MAX_DB_ASYNC_CONNECTIONS overwrites MAX_DB_CONNECTIONS value </span>
    <span class="n">MAX_DB_CONNECTIONS</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">MAX_DB_ASYNC_CONNECTIONS</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">BASE_VERSION</span> <span class="o">=</span> <span class="s">&quot;1.1&quot;</span>
    <span class="c"># Nested transactions are not supported by all databases and not really necessary in TVB so far so</span>
    <span class="c"># we don&#39;t support them yet. However when running tests we can use them to out advantage to rollback </span>
    <span class="c"># any database changes between tests.</span>
    <span class="n">ALLOW_NESTED_TRANSACTIONS</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="c"># This is the version of the data stored in H5 and XML files</span>
    <span class="c"># and should be used by next versions to know how to import</span>
    <span class="c"># data in TVB format, in case data structure changes.</span>
    <span class="c"># Value should be updated every time data structure is changed.</span>
    <span class="n">DATA_VERSION</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">DATA_VERSION_ATTRIBUTE</span> <span class="o">=</span> <span class="s">&quot;Data_version&quot;</span>


    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.DATA_CHECKED_TO_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.DATA_CHECKED_TO_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">DATA_CHECKED_TO_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;The version up until we done the upgrade properly for the file data storage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_LAST_CHECKED_FILE_VERSION</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.FILE_STORAGE_UPGRADE_STATUS"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.FILE_STORAGE_UPGRADE_STATUS">[docs]</a>    <span class="k">def</span> <span class="nf">FILE_STORAGE_UPGRADE_STATUS</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Keeps track if the storage upgrade was successfull or not. This is set to `invalid` in case</span>
<span class="sd">        some of the datatypes upgrade failed. It&#39;s not used thus far but we might want to have it so </span>
<span class="sd">        we can re-run an improved upgrade script on all datatypes that are invalid.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_FILE_STORAGE_UPDATE_STATUS</span><span class="p">,</span> <span class="s">&#39;valid&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.SVN_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.SVN_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">SVN_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Current SVN version in the package running now.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">BIN_FOLDER</span><span class="p">,</span> <span class="s">&#39;tvb.version&#39;</span><span class="p">),</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">version_file</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">parse_svn_version</span><span class="p">(</span><span class="n">version_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_proc</span> <span class="o">=</span> <span class="n">Popen</span><span class="p">([</span><span class="s">&quot;svnversion&quot;</span><span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">parse_svn_version</span><span class="p">(</span><span class="n">_proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">parse_svn_version</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.CURRENT_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.CURRENT_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">CURRENT_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; Concatenate BASE_VERSION with svn revision number&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">BASE_VERSION</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">SVN_VERSION</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.CODE_CHECKED_TO_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.CODE_CHECKED_TO_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">CODE_CHECKED_TO_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;The version up until we done the upgrade properly for the file data storage.&quot;&quot;&quot;</span>
        <span class="n">version_string</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_LAST_CHECKED_CODE_VERSION</span><span class="p">,</span> <span class="s">&#39;-1&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">parse_svn_version</span><span class="p">(</span><span class="n">version_string</span><span class="p">)</span>


    <span class="c"># Access rights for TVB generated files/folders.</span></div>
    <span class="n">ACCESS_MODE_TVB_FILES</span> <span class="o">=</span> <span class="mo">0744</span>

    <span class="n">LOCALHOST</span> <span class="o">=</span> <span class="s">&quot;127.0.0.1&quot;</span>
    <span class="n">SYSTEM_USER_NAME</span> <span class="o">=</span> <span class="s">&#39;TVB system&#39;</span>
    <span class="n">DEFAULT_ADMIN_EMAIL</span> <span class="o">=</span> <span class="s">&#39;jira.tvb@gmail.com&#39;</span>
    <span class="n">BIN_FOLDER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="nb">bin</span><span class="o">.</span><span class="n">__file__</span><span class="p">))</span>
    <span class="n">CURRENT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>
    <span class="n">EXTERNALS_FOLDER_PARENT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">BIN_FOLDER</span><span class="p">)</span>

    <span class="c"># Specify if the current process is executing an operation (via clusterLauncher)</span>
    <span class="n">OPERATION_EXECUTION_PROCESS</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="n">CLUSTER_SCHEDULE_COMMAND</span> <span class="o">=</span> <span class="s">&#39;oarsub -l walltime=</span><span class="si">%s</span><span class="s"> -q tvb -S &quot;/home/tvbadmin/clusterLauncher </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;&#39;</span>
    <span class="n">CLUSTER_STOP_COMMAND</span> <span class="o">=</span> <span class="s">&#39;oardel </span><span class="si">%s</span><span class="s">&#39;</span>

    <span class="n">_CACHED_RUNNING_ON_CLUSTER_NODE</span> <span class="o">=</span> <span class="bp">None</span>


    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.RUNNING_ON_CLUSTER_NODE"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.RUNNING_ON_CLUSTER_NODE">[docs]</a>    <span class="k">def</span> <span class="nf">RUNNING_ON_CLUSTER_NODE</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if current execution happens on cluster node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_RUNNING_ON_CLUSTER_NODE</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_RUNNING_ON_CLUSTER_NODE</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">CLUSTER_NODE_NAME</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_RUNNING_ON_CLUSTER_NODE</span>

</div>
    <span class="n">_CACHED_CLUSTER_NODE_NAME</span> <span class="o">=</span> <span class="bp">None</span>


    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.CLUSTER_NODE_NAME"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.CLUSTER_NODE_NAME">[docs]</a>    <span class="k">def</span> <span class="nf">CLUSTER_NODE_NAME</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the name of the cluster on which TVB code is executed.</span>
<span class="sd">        If code is executed on a normal machine (not cluster node) returns None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Check if the name wasn&#39;t computed before.</span>
        <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_CLUSTER_NODE_NAME</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># Read env variable which contains path the the file containing node name</span>
            <span class="n">env_oar_nodefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">&#39;OAR_NODEFILE&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">env_oar_nodefile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">env_oar_nodefile</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># Read node name from file</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">env_oar_nodefile</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">node_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">node_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_name</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_CLUSTER_NODE_NAME</span> <span class="o">=</span> <span class="n">node_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_CLUSTER_NODE_NAME</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">_CACHED_CLUSTER_NODE_NAME</span>

        <span class="k">return</span> <span class="bp">None</span>

</div>
    <span class="n">TVB_CONFIG_FILE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">,</span> <span class="s">&#39;.tvb.configuration&#39;</span><span class="p">))</span>
    <span class="c">#the folder containing the XSD files used for validating applications XMLs</span>
    <span class="n">SCHEMA_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="s">&#39;core&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">)</span>
    <span class="c"># Web Specifications:</span>
    <span class="n">RENDER_HTML</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">TEMPLATE_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CURRENT_DIR</span><span class="p">,</span> <span class="s">&#39;interfaces&#39;</span><span class="p">,</span> <span class="s">&#39;web&#39;</span><span class="p">,</span> <span class="s">&#39;templates&#39;</span><span class="p">,</span> <span class="s">&#39;genshi&#39;</span><span class="p">)</span>
    <span class="n">WEB_VISUALIZERS_ROOT</span> <span class="o">=</span> <span class="s">&quot;tvb.interfaces.web.templates.genshi.visualizers&quot;</span>
    <span class="n">WEB_VISUALIZERS_URL_PREFIX</span> <span class="o">=</span> <span class="s">&quot;/flow/read_datatype_attribute/&quot;</span>
    <span class="c"># Traits Specific</span>
    <span class="n">TRAITS_CONFIGURATION</span> <span class="o">=</span> <span class="n">EnhancedDictionary</span><span class="p">()</span>
    <span class="n">TRAITS_CONFIGURATION</span><span class="o">.</span><span class="n">interface_method_name</span> <span class="o">=</span> <span class="s">&#39;interface&#39;</span>
    <span class="n">TRAITS_CONFIGURATION</span><span class="o">.</span><span class="n">use_storage</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c">#Logger specific</span>
    <span class="n">LOGGER_CONFIG_FILE_NAME</span> <span class="o">=</span> <span class="s">&quot;logger_config.conf&quot;</span>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="BaseProfile.initialize_profile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.initialize_profile">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_profile</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is called at the time the config.py module is first imported. Any specific</span>
<span class="sd">        initializations for the profile should be placed here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


    <span class="c"># III. Attributes that can be overwritten from config file.</span>
    <span class="c">#     Will have only default values in here.</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.TVB_STORAGE"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.TVB_STORAGE">[docs]</a>    <span class="k">def</span> <span class="nf">TVB_STORAGE</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Root folder for all projects and users.&quot;&quot;&quot;</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">,</span> <span class="s">&quot;TVB&quot;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MAX_DISK_SPACE"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MAX_DISK_SPACE">[docs]</a>    <span class="k">def</span> <span class="nf">MAX_DISK_SPACE</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; The maximum disk space that can be used by one single user, in KB. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_MAX_DISK_SPACE_USR</span><span class="p">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MATLAB_EXECUTABLE"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MATLAB_EXECUTABLE">[docs]</a>    <span class="k">def</span> <span class="nf">MATLAB_EXECUTABLE</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; The path to the matlab executable (if existend). Otherwise just return an empty string. &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_MATLAB_EXECUTABLE</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s">&#39;None&#39;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">return</span> <span class="n">value</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.TVB_TEMP_FOLDER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.TVB_TEMP_FOLDER">[docs]</a>    <span class="k">def</span> <span class="nf">TVB_TEMP_FOLDER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Represents a temporary folder, where to store things for a while.</span>
<span class="sd">        Content of this folder can be deleted at any time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmp_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&quot;TEMP&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmp_path</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.TVB_LOG_FOLDER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.TVB_LOG_FOLDER">[docs]</a>    <span class="k">def</span> <span class="nf">TVB_LOG_FOLDER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Represents a folder, where all log files are stored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmp_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&quot;logs&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmp_path</span>


    <span class="c"># DB related attributes:</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.ACEEPTED_DBS"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.ACEEPTED_DBS">[docs]</a>    <span class="k">def</span> <span class="nf">ACEEPTED_DBS</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;A dictionary with accepted db&#39;s and their default URLS&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;postgres&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">POSTGRES_URL</span><span class="p">,</span>
                <span class="s">&#39;sqlite&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&quot;tvb-database.db&quot;</span><span class="p">))}</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.SELECTED_DB"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.SELECTED_DB">[docs]</a>    <span class="k">def</span> <span class="nf">SELECTED_DB</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Selected DB should be a key that exists in </span>
<span class="sd">        the ACCEPTED_DBS dictionary&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_SELECTED_DB</span><span class="p">,</span> <span class="s">&#39;sqlite&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.DB_URL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.DB_URL">[docs]</a>    <span class="k">def</span> <span class="nf">DB_URL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Used DB url: IP,PORT. The DB  needs to be created in advance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">SELECTED_DB</span> <span class="ow">in</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">ACEEPTED_DBS</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">ACEEPTED_DBS</span><span class="p">[</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">SELECTED_DB</span><span class="p">]</span>
        <span class="k">return</span> <span class="s">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&quot;tvb-database.db&quot;</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.POSTGRES_URL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.POSTGRES_URL">[docs]</a>    <span class="k">def</span> <span class="nf">POSTGRES_URL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Default URL for Postgres DB&quot;&quot;&quot;</span>
        <span class="n">default</span> <span class="o">=</span> <span class="s">&#39;postgresql+psycopg2://postgres:root@127.0.0.1:5432/tvb?user=postgres&amp;password=postgres&#39;</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_DB_URL</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">SELECTED_DB</span> <span class="o">==</span> <span class="s">&#39;postgres&#39;</span> <span class="ow">and</span> <span class="n">current_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;postgresql&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">current_url</span>
        <span class="k">return</span> <span class="n">default</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.DB_VERSIONING_REPO"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.DB_VERSIONING_REPO">[docs]</a>    <span class="k">def</span> <span class="nf">DB_VERSIONING_REPO</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Upgrade/Downgrade repository&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&#39;db_repo&#39;</span><span class="p">)</span>


    <span class="c"># IP and Ports</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.SERVER_IP"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.SERVER_IP">[docs]</a>    <span class="k">def</span> <span class="nf">SERVER_IP</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Web server access IP/name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_IP</span><span class="p">,</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">LOCALHOST</span><span class="p">)</span>


    <span class="c"># The maximum number of threads to allocate in case TVB is ran locally instead</span>
    <span class="c"># of cluster. This represents the maximum number of operations that can be executed</span>
    <span class="c"># in parallel.</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MAX_THREADS_NUMBER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MAX_THREADS_NUMBER">[docs]</a>    <span class="k">def</span> <span class="nf">MAX_THREADS_NUMBER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Maximum number of threads in the pool of simulations range.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_MAX_THREAD_NR</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>


    <span class="c"># The maximum number of operations that can be launched with a PSE mechanism.</span>
    <span class="c"># when setting ranges with a bigger number of resulting operations, an exception will be thrown.</span>
    <span class="c"># oarsub on the cluster has a maximum number of entries in the queue also set. </span>
    <span class="c"># This number should not be bigger than the oar setting, or ops will be lost.</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MAX_RANGE_NUMBER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MAX_RANGE_NUMBER">[docs]</a>    <span class="k">def</span> <span class="nf">MAX_RANGE_NUMBER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Maximum number of operations that can be scheduled from UI.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_MAX_RANGE_NR</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>


    <span class="c"># The maximum number of vertices that are allowed for a surface.</span>
    <span class="c"># System will not allow import of surfaces with more vertices than this value.</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MAX_SURFACE_VERTICES_NUMBER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MAX_SURFACE_VERTICES_NUMBER">[docs]</a>    <span class="k">def</span> <span class="nf">MAX_SURFACE_VERTICES_NUMBER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Maximum number of vertices acceptable o be part of a surface at import time.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_MAX_NR_SURFACE_VERTEX</span><span class="p">,</span> <span class="mi">300000</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.WEB_SERVER_PORT"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.WEB_SERVER_PORT">[docs]</a>    <span class="k">def</span> <span class="nf">WEB_SERVER_PORT</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;CherryPy port&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_PORT</span><span class="p">,</span> <span class="mi">8080</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.MPLH5_SERVER_PORT"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.MPLH5_SERVER_PORT">[docs]</a>    <span class="k">def</span> <span class="nf">MPLH5_SERVER_PORT</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Post for the Matplotlib HTML5 backend&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_PORT_MPLH5</span><span class="p">,</span> <span class="mi">9000</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.DEPLOY_CLUSTER"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.DEPLOY_CLUSTER">[docs]</a>    <span class="k">def</span> <span class="nf">DEPLOY_CLUSTER</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only when DEPLOY_CLUSTER, CLUSTER_SCHEDULE_COMMAND is used.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_CLUSTER</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="nb">eval</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.BASE_URL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.BASE_URL">[docs]</a>    <span class="k">def</span> <span class="nf">BASE_URL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;PUBLIC WEB reference towards the cluster.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;http://&#39;</span> <span class="o">+</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">SERVER_IP</span> <span class="o">+</span> <span class="s">&#39;:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">WEB_SERVER_PORT</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.URL_TVB_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.URL_TVB_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">URL_TVB_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;URL for reading current available version information.&quot;&quot;&quot;</span>
        <span class="n">default</span> <span class="o">=</span> <span class="s">&quot;http://www.thevirtualbrain.org/register/version.xml&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_URL_VERSION</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>


    <span class="c"># ADMINISTRATOR user:</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.ADMINISTRATOR_NAME"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.ADMINISTRATOR_NAME">[docs]</a>    <span class="k">def</span> <span class="nf">ADMINISTRATOR_NAME</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Give name for the Admin user, first created.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_ADMIN_NAME</span><span class="p">,</span> <span class="s">&#39;admin&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.ADMINISTRATOR_PASSWORD"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.ADMINISTRATOR_PASSWORD">[docs]</a>    <span class="k">def</span> <span class="nf">ADMINISTRATOR_PASSWORD</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Admin&#39;s password used when creating first user&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_ADMIN_PWD</span><span class="p">,</span> <span class="s">&#39;1a1dc91c907325c69271ddf0c944bc72&#39;</span><span class="p">)</span>
        <span class="c"># MD5 for &#39;pass&#39;</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.ADMINISTRATOR_BLANK_PWD"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.ADMINISTRATOR_BLANK_PWD">[docs]</a>    <span class="k">def</span> <span class="nf">ADMINISTRATOR_BLANK_PWD</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Unencrypted default password&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;pass&#39;</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.ADMINISTRATOR_EMAIL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.ADMINISTRATOR_EMAIL">[docs]</a>    <span class="k">def</span> <span class="nf">ADMINISTRATOR_EMAIL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Admin&#39;s email used when creating first user&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_ADMIN_EMAIL</span><span class="p">,</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">DEFAULT_ADMIN_EMAIL</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="BaseProfile.TVB_PATH"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.TVB_PATH">[docs]</a>    <span class="k">def</span> <span class="nf">TVB_PATH</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_TVB_PATH</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>


    <span class="c"># CherryPy settings:</span></div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.CHERRYPY_CONFIGURATION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.CHERRYPY_CONFIGURATION">[docs]</a>    <span class="k">def</span> <span class="nf">CHERRYPY_CONFIGURATION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;CherryPy startup configuration&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s">&#39;global&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;server.socket_host&#39;</span><span class="p">:</span> <span class="s">&#39;0.0.0.0&#39;</span><span class="p">,</span>
                <span class="s">&#39;server.socket_port&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">WEB_SERVER_PORT</span><span class="p">,</span>
                <span class="s">&#39;server.thread_pool&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s">&#39;engine.autoreload_on&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                <span class="s">&#39;server.max_request_body_size&#39;</span><span class="p">:</span> <span class="mi">1932735283</span>  <span class="c"># 1.8 GB</span>
            <span class="p">},</span>
            <span class="s">&#39;/&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;tools.encode.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.encode.encoding&#39;</span><span class="p">:</span> <span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                <span class="s">&#39;tools.decode.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.gzip.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.sessions.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.sessions.storage_type&#39;</span><span class="p">:</span> <span class="s">&#39;ram&#39;</span><span class="p">,</span>
                <span class="s">&#39;tools.sessions.timeout&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">,</span>  <span class="c"># 100 hours</span>
                <span class="s">&#39;tools.sessions.locking&#39;</span><span class="p">:</span> <span class="s">&#39;explicit&#39;</span><span class="p">,</span>
                <span class="s">&#39;tools.upload.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>    <span class="c"># Tool to check upload content size</span>
                <span class="s">&#39;tools.cleanup.on&#39;</span><span class="p">:</span> <span class="bp">True</span>    <span class="c"># Tool to clean up files on disk</span>
            <span class="p">},</span>
            <span class="s">&#39;/static&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;tools.staticdir.root&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">CURRENT_DIR</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;interfaces&#39;</span><span class="p">,</span> <span class="s">&#39;web&#39;</span><span class="p">,</span> <span class="s">&#39;static&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s">&#39;/statichelp&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;tools.staticdir.root&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">CURRENT_DIR</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;interfaces&#39;</span><span class="p">,</span> <span class="s">&#39;web&#39;</span><span class="p">,</span> <span class="s">&#39;static&#39;</span><span class="p">,</span> <span class="s">&#39;help&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s">&#39;/static_view&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;tools.staticdir.root&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">CURRENT_DIR</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;interfaces&#39;</span><span class="p">,</span> <span class="s">&#39;web&#39;</span><span class="p">,</span> <span class="s">&#39;templates&#39;</span><span class="p">,</span> <span class="s">&#39;genshi&#39;</span><span class="p">,</span> <span class="s">&#39;visualizers&#39;</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="s">&#39;/schema&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;tools.staticdir.root&#39;</span><span class="p">:</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">CURRENT_DIR</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.on&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&#39;tools.staticdir.dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;core&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">),</span>
            <span class="p">},</span>
        <span class="p">}</span>

</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.parse_svn_version"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.parse_svn_version">[docs]</a>    <span class="k">def</span> <span class="nf">parse_svn_version</span><span class="p">(</span><span class="n">version_string</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">version_string</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">if</span> <span class="s">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">version_string</span><span class="p">:</span>
                <span class="n">version_string</span> <span class="o">=</span> <span class="n">version_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">number</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">version_string</span> <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()])</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.read_config_file"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.read_config_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_config_file</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get data from the configurations file in the form of a dictionary.</span>
<span class="sd">        Return None if file not present.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_CONFIG_FILE</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">TVB_CONFIG_FILE</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cfg_file</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">cfg_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">one_entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">one_entry</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">config_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">FILE_SETTINGS</span> <span class="o">=</span> <span class="n">config_dict</span>
        <span class="k">return</span> <span class="n">config_dict</span>

</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="BaseProfile.add_entries_to_config_file"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.add_entries_to_config_file">[docs]</a>    <span class="k">def</span> <span class="nf">add_entries_to_config_file</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the LAST_CHECKED_FILE_VERSION from the settings file to the current DATA_VERSION.</span>
<span class="sd">        </span>
<span class="sd">        :param input_data: A dictionary of pairs that need to be added to the config file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">read_config_file</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">config_dict</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">input_data</span><span class="p">:</span>
            <span class="n">config_dict</span><span class="p">[</span><span class="n">entry</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_data</span><span class="p">[</span><span class="n">entry</span><span class="p">]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">TVB_CONFIG_FILE</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_writer</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">config_dict</span><span class="p">:</span>
                <span class="n">file_writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s">&#39;=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="BaseProfile.update_config_file"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.update_config_file">[docs]</a>    <span class="k">def</span> <span class="nf">update_config_file</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update data from configuration file, without restart. Used by</span>
<span class="sd">        methods like change password, or change email.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">read_config_file</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">config_dict</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">config_dict</span> <span class="o">=</span> <span class="n">data_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">config_dict</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">config_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">TVB_CONFIG_FILE</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_writer</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">config_dict</span><span class="p">:</span>
                <span class="n">file_writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s">&#39;=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.get_attribute"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.get_attribute">[docs]</a>    <span class="k">def</span> <span class="nf">get_attribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a cfg attribute that could also be found in the settings file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">FILE_SETTINGS</span> <span class="ow">and</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">FILE_SETTINGS</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">dtype</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">FILE_SETTINGS</span><span class="p">[</span><span class="n">attr_name</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c">## Invalid convert operation.</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="k">return</span> <span class="n">default</span>


    <span class="c">#File keys</span></div>
    <span class="n">KEY_ADMIN_NAME</span> <span class="o">=</span> <span class="s">&#39;ADMINISTRATOR_NAME&#39;</span>
    <span class="n">KEY_ADMIN_PWD</span> <span class="o">=</span> <span class="s">&#39;ADMINISTRATOR_PASSWORD&#39;</span>
    <span class="n">KEY_ADMIN_EMAIL</span> <span class="o">=</span> <span class="s">&#39;ADMINISTRATOR_EMAIL&#39;</span>
    <span class="n">KEY_TVB_PATH</span> <span class="o">=</span> <span class="s">&#39;TVB_PATH&#39;</span>
    <span class="n">KEY_STORAGE</span> <span class="o">=</span> <span class="s">&#39;TVB_STORAGE&#39;</span>
    <span class="n">KEY_MAX_DISK_SPACE_USR</span> <span class="o">=</span> <span class="s">&#39;USR_DISK_SPACE&#39;</span>
    <span class="c">#During the introspection phase, it is checked if either Matlab or</span>
    <span class="c">#octave are installed and available trough the system PATH variable</span>
    <span class="c">#If so, they will be used for some analyzers</span>
    <span class="n">KEY_MATLAB_EXECUTABLE</span> <span class="o">=</span> <span class="s">&#39;MATLAB_EXECUTABLE&#39;</span>
    <span class="n">KEY_IP</span> <span class="o">=</span> <span class="s">&#39;SERVER_IP&#39;</span>
    <span class="n">KEY_PORT</span> <span class="o">=</span> <span class="s">&#39;WEB_SERVER_PORT&#39;</span>
    <span class="n">KEY_PORT_MPLH5</span> <span class="o">=</span> <span class="s">&#39;MPLH5_SERVER_PORT&#39;</span>
    <span class="n">KEY_SELECTED_DB</span> <span class="o">=</span> <span class="s">&#39;SELECTED_DB&#39;</span>
    <span class="n">KEY_DB_URL</span> <span class="o">=</span> <span class="s">&#39;URL_VALUE&#39;</span>
    <span class="n">KEY_URL_VERSION</span> <span class="o">=</span> <span class="s">&#39;URL_TVB_VERSION&#39;</span>
    <span class="n">KEY_CLUSTER</span> <span class="o">=</span> <span class="s">&#39;DEPLOY_CLUSTER&#39;</span>
    <span class="n">KEY_MAX_THREAD_NR</span> <span class="o">=</span> <span class="s">&#39;MAXIMUM_NR_OF_THREADS&#39;</span>
    <span class="n">KEY_MAX_RANGE_NR</span> <span class="o">=</span> <span class="s">&#39;MAXIMUM_NR_OF_OPS_IN_RANGE&#39;</span>
    <span class="n">KEY_MAX_NR_SURFACE_VERTEX</span> <span class="o">=</span> <span class="s">&#39;MAXIMUM_NR_OF_VERTICES_ON_SURFACE&#39;</span>
    <span class="n">KEY_LAST_CHECKED_FILE_VERSION</span> <span class="o">=</span> <span class="s">&#39;LAST_CHECKED_FILE_VERSION&#39;</span>
    <span class="n">KEY_LAST_CHECKED_CODE_VERSION</span> <span class="o">=</span> <span class="s">&#39;LAST_CHECKED_CODE_VERSION&#39;</span>
    <span class="n">KEY_FILE_STORAGE_UPDATE_STATUS</span> <span class="o">=</span> <span class="s">&#39;FILE_STORAGE_UPDATE_STATUS&#39;</span>
    <span class="c"># Keep a mapping of how the python executable will look on different os versions</span>
    <span class="n">PYTHON_EXE_MAPPING</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;windows&#39;</span><span class="p">:</span> <span class="s">&#39;python.exe&#39;</span><span class="p">,</span>
                          <span class="s">&#39;linux&#39;</span><span class="p">:</span> <span class="s">&#39;python&#39;</span><span class="p">,</span>
                          <span class="s">&#39;macos&#39;</span><span class="p">:</span> <span class="s">&#39;python&#39;</span><span class="p">}</span>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BaseProfile.is_development"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.is_development">[docs]</a>    <span class="k">def</span> <span class="nf">is_development</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True when TVB  is used with Python installed natively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tvb_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">BaseProfile</span><span class="o">.</span><span class="n">CURRENT_DIR</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tvb_root</span><span class="p">,</span> <span class="s">&#39;AUTHORS&#39;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tvb_root</span><span class="p">,</span> <span class="s">&#39;ui_test&#39;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tvb_root</span><span class="p">,</span> <span class="s">&#39;tvb_test&#39;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">tvb_root</span><span class="p">),</span> <span class="s">&#39;documentor&#39;</span><span class="p">)))</span>

</div>
<div class="viewcode-block" id="BaseProfile.is_windows"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.is_windows">[docs]</a>    <span class="k">def</span> <span class="nf">is_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if current run is not development and is running on Windows.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;win&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_development</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="BaseProfile.is_linux"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.is_linux">[docs]</a>    <span class="k">def</span> <span class="nf">is_linux</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Return True if current run is not development and is running on Linux.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;win&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">platform</span> <span class="o">==</span> <span class="s">&#39;darwin&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_development</span><span class="p">())</span>

</div>
<div class="viewcode-block" id="BaseProfile.is_mac"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.is_mac">[docs]</a>    <span class="k">def</span> <span class="nf">is_mac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if current run is not development and is running on Mac OS X</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">platform</span> <span class="o">==</span> <span class="s">&#39;darwin&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_development</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="BaseProfile.get_python_exe_name"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.get_python_exe_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_python_exe_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the name of the python executable depending on the specific OS &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;win&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PYTHON_EXE_MAPPING</span><span class="p">[</span><span class="s">&#39;windows&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">platform</span> <span class="o">==</span> <span class="s">&#39;darwin&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PYTHON_EXE_MAPPING</span><span class="p">[</span><span class="s">&#39;macos&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PYTHON_EXE_MAPPING</span><span class="p">[</span><span class="s">&#39;linux&#39;</span><span class="p">]</span>

</div>
<div class="viewcode-block" id="BaseProfile.get_library_folder"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.get_library_folder">[docs]</a>    <span class="k">def</span> <span class="nf">get_library_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return top level library folder &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_windows</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mac</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BIN_FOLDER</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_linux</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">))</span>
        
</div>
<div class="viewcode-block" id="BaseProfile.get_python_path"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.BaseProfile.get_python_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_python_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get Python path, based on running options.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_development</span><span class="p">():</span>
            <span class="k">return</span> <span class="s">&#39;python&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_windows</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">BIN_FOLDER</span><span class="p">),</span> <span class="s">&#39;exe&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_python_exe_name</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mac</span><span class="p">():</span>
            <span class="n">root_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">BIN_FOLDER</span><span class="p">))))</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="s">&#39;MacOS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_python_exe_name</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_linux</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">BIN_FOLDER</span><span class="p">),</span> <span class="s">&#39;exe&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_python_exe_name</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;Invalid BUILD type found!!!&quot;</span><span class="p">)</span>


</div></div>
<div class="viewcode-block" id="DevelopmentProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.DevelopmentProfile">[docs]</a><span class="k">class</span> <span class="nc">DevelopmentProfile</span><span class="p">(</span><span class="n">BaseProfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom settings for development profile.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">LOGGER_CONFIG_FILE_NAME</span> <span class="o">=</span> <span class="s">&quot;dev_logger_config.conf&quot;</span>


</div>
<div class="viewcode-block" id="TestSQLiteProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile">[docs]</a><span class="k">class</span> <span class="nc">TestSQLiteProfile</span><span class="p">(</span><span class="n">BaseProfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines settings for running tests on an SQLite database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#Use a different configuration file, to make it possible to run multiple instances in the same time</span>
    <span class="n">TVB_CONFIG_FILE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">,</span> <span class="s">&#39;.test.tvb.configuration&#39;</span><span class="p">))</span>

    <span class="n">RENDER_HTML</span> <span class="o">=</span> <span class="bp">False</span>


    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="TestSQLiteProfile.TVB_STORAGE"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile.TVB_STORAGE">[docs]</a>    <span class="k">def</span> <span class="nf">TVB_STORAGE</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Root folder for all projects and users.&quot;&quot;&quot;</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">,</span> <span class="s">&quot;TVB_TEST&quot;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">))</span>
        <span class="n">current_storage</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">KEY_STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">current_storage</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">current_storage</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">current_storage</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="TestSQLiteProfile.DB_URL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile.DB_URL">[docs]</a>    <span class="k">def</span> <span class="nf">DB_URL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Used DB url: IP,PORT. The DB  needs to be created in advance.&quot;&quot;&quot;</span>
        <span class="n">db_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TestSQLiteProfile</span><span class="o">.</span><span class="n">TVB_STORAGE</span><span class="p">,</span> <span class="s">&quot;tvb-database.db&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">db_url</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="TestSQLiteProfile.SELECTED_DB"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile.SELECTED_DB">[docs]</a>    <span class="k">def</span> <span class="nf">SELECTED_DB</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;The selected DB will be SQLite.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;sqlite&#39;</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="TestSQLiteProfile.CODE_CHECKED_TO_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile.CODE_CHECKED_TO_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">CODE_CHECKED_TO_VERSION</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="TestSQLiteProfile.SVN_VERSION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestSQLiteProfile.SVN_VERSION">[docs]</a>    <span class="k">def</span> <span class="nf">SVN_VERSION</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Current SVN version in the package running now.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>


</div></div>
<div class="viewcode-block" id="TestPostgresProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestPostgresProfile">[docs]</a><span class="k">class</span> <span class="nc">TestPostgresProfile</span><span class="p">(</span><span class="n">TestSQLiteProfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines settings for running tests on a Postgres database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">RENDER_HTML</span> <span class="o">=</span> <span class="bp">False</span>


    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="TestPostgresProfile.DB_URL"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestPostgresProfile.DB_URL">[docs]</a>    <span class="k">def</span> <span class="nf">DB_URL</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Used DB url: IP,PORT. The DB  needs to be created in advance.&quot;&quot;&quot;</span>
        <span class="n">default</span> <span class="o">=</span> <span class="s">&#39;postgresql+psycopg2://postgres:root@127.0.0.1:5432/tvb-test?user=postgres&amp;password=postgres&#39;</span>
        <span class="k">return</span> <span class="n">default</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@settings_loaded</span><span class="p">()</span>
<div class="viewcode-block" id="TestPostgresProfile.SELECTED_DB"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.TestPostgresProfile.SELECTED_DB">[docs]</a>    <span class="k">def</span> <span class="nf">SELECTED_DB</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;The selected DB will be SQLite.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;postgres&#39;</span>


</div></div>
<div class="viewcode-block" id="DeploymentProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.DeploymentProfile">[docs]</a><span class="k">class</span> <span class="nc">DeploymentProfile</span><span class="p">(</span><span class="n">BaseProfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Profile for packages deployed already.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="DeploymentProfile.initialize_profile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.DeploymentProfile.initialize_profile">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_profile</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is called at the time the config.py module is first imported. Any specific</span>
<span class="sd">        initializations for the profile should be placed here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#We want to disable warnings we get from sqlalchemy for traited attributes</span>
        <span class="c">#when we are in deployment mode.</span>
        <span class="kn">import</span> <span class="nn">warnings</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">exc</span> <span class="k">as</span> <span class="n">sa_exc</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">sa_exc</span><span class="o">.</span><span class="n">SAWarning</span><span class="p">)</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">FrameworkSettings</span><span class="p">()</span>
        <span class="n">data_path</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">get_library_folder</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">is_windows</span><span class="p">():</span>
            <span class="c"># Add root folder as first in PYTHONPATH so we can find TVB there in case of GIT contributors</span>
            <span class="n">new_python_path</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">TVB_PATH</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span>
            <span class="n">new_python_path</span> <span class="o">+=</span> <span class="n">data_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s">&#39;lib-tk&#39;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PYTHONPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_python_path</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;PATH&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="n">setup_tk_tcl_environ</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">is_mac</span><span class="p">():</span>
            <span class="c"># MacOS package structure is in the form:</span>
            <span class="c"># Contents/Resorces/lib/python2.7/tvb . PYTHONPATH needs to be set</span>
            <span class="c"># at the level Contents/Resources/lib/python2.7/ and the root path</span>
            <span class="c"># from where to start looking for TK and TCL up to Contents/</span>
            <span class="n">tcl_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">data_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">setup_tk_tcl_environ</span><span class="p">(</span><span class="n">tcl_root</span><span class="p">)</span>

            <span class="c">#Add root folder as first in PYTHONPATH so we can find TVB there in case of GIT contributors</span>
            <span class="n">new_python_path</span> <span class="o">=</span> <span class="n">data_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s">&#39;site-packages.zip&#39;</span><span class="p">)</span>
            <span class="n">new_python_path</span> <span class="o">+=</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s">&#39;lib-dynload&#39;</span><span class="p">)</span>
            <span class="n">new_python_path</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">TVB_PATH</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">new_python_path</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PYTHONPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_python_path</span>

        <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">is_linux</span><span class="p">():</span>
            <span class="c"># Note that for the Linux package some environment variables like LD_LIBRARY_PATH,</span>
            <span class="c"># LD_RUN_PATH, PYTHONPATH and PYTHONHOME are set also in the startup scripts.</span>
            <span class="c"># Add root folder as first in PYTHONPATH so we can find TVB there in case of GIT contributors</span>
            <span class="n">new_python_path</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">TVB_PATH</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">data_path</span>
            <span class="n">new_python_path</span> <span class="o">+=</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s">&#39;lib-tk&#39;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PYTHONPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_python_path</span>
            <span class="n">setup_tk_tcl_environ</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>

</div>
    <span class="nd">@ClassProperty</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="DeploymentProfile.CHERRYPY_CONFIGURATION"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.DeploymentProfile.CHERRYPY_CONFIGURATION">[docs]</a>    <span class="k">def</span> <span class="nf">CHERRYPY_CONFIGURATION</span><span class="p">():</span>

        <span class="n">inside_static_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">EXTERNALS_FOLDER_PARENT</span><span class="p">,</span> <span class="s">&#39;tvb&#39;</span><span class="p">)</span>

        <span class="n">default_configuration</span> <span class="o">=</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">CHERRYPY_CONFIGURATION</span>
        <span class="n">default_configuration</span><span class="p">[</span><span class="s">&#39;/statichelp&#39;</span><span class="p">][</span><span class="s">&#39;tools.staticdir.root&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inside_static_folder</span>
        <span class="k">return</span> <span class="n">default_configuration</span>

</div></div>
<div class="viewcode-block" id="ConsoleProfile"><a class="viewcode-back" href="../../../tvb.config.html#tvb.config.settings.ConsoleProfile">[docs]</a><span class="k">class</span> <span class="nc">ConsoleProfile</span><span class="p">(</span><span class="n">DeploymentProfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Profile which allows you to work with tvb in console mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TRAITS_CONFIGURATION</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">BaseProfile</span><span class="o">.</span><span class="n">TRAITS_CONFIGURATION</span><span class="p">)</span>
    <span class="n">TRAITS_CONFIGURATION</span><span class="o">.</span><span class="n">use_storage</span> <span class="o">=</span> <span class="bp">True</span>


</div>
<span class="k">if</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">CURRENT_SELECTED_PROFILE</span> <span class="o">==</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">TEST_POSTGRES_PROFILE</span><span class="p">:</span>
    <span class="n">FrameworkSettings</span> <span class="o">=</span> <span class="n">TestPostgresProfile</span>

<span class="k">elif</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">CURRENT_SELECTED_PROFILE</span> <span class="o">==</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">TEST_SQLITE_PROFILE</span><span class="p">:</span>
    <span class="n">FrameworkSettings</span> <span class="o">=</span> <span class="n">TestSQLiteProfile</span>

<span class="k">elif</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">CURRENT_SELECTED_PROFILE</span> <span class="o">==</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">CONSOLE_PROFILE</span><span class="p">:</span>
    <span class="n">FrameworkSettings</span> <span class="o">=</span> <span class="n">ConsoleProfile</span>

<span class="k">elif</span> <span class="n">BaseProfile</span><span class="o">.</span><span class="n">is_development</span><span class="p">()</span> <span class="ow">or</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">CURRENT_SELECTED_PROFILE</span> <span class="o">==</span> <span class="n">tvb_profile</span><span class="o">.</span><span class="n">DEVELOPMENT_PROFILE</span><span class="p">:</span>
    <span class="n">FrameworkSettings</span> <span class="o">=</span> <span class="n">DevelopmentProfile</span>

<span class="k">else</span><span class="p">:</span>
    <span class="n">FrameworkSettings</span> <span class="o">=</span> <span class="n">DeploymentProfile</span>

<span class="n">FrameworkSettings</span><span class="o">.</span><span class="n">initialize_profile</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/evil_tvb_logo_transparent.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">The Virtual Brain 1.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>