

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>|example| Tutorial &mdash; tvb_doc 2.7 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="tvb_doc 2.7 documentation" href="index.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left;  padding: 10px 10px 15px 15px">
<a href="http://www.thevirtualbrain.org/"><img src="_static/logo.svg" height="148" border="0" alt="The Virtual Brain Project"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="web_interface.html">web interface</a>|&nbsp;</li>
	<li><a href="console_interface.html">console interface</a>|&nbsp;</li>
	<li><a href="api.html">API</a>|&nbsp;</li>
	<li><a href="developer.html">Developer</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/UserGuide-Tutorial_Lesion_Connectivity.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="example-tutorial">
<h1><a href="#id1"><span class="problematic" id="id2">|example|</span></a> Tutorial<a class="headerlink" href="#example-tutorial" title="Permalink to this headline">¶</a></h1>
<p><strong>A simple lesion study using TVB</strong></p>
<p><strong>Objective</strong>:
learn how to generate simulated brain activity to study the impact of brain
lesions on functional patterns of activity.</p>
<p><strong>Summary</strong>:
In <a href="#id3"><span class="problematic" id="id4">|TVB|</span></a> platform it is possible to edit a connectivity matrix to mimic brain
lesions. In the present study, a lesion in a given node area is modeled by
removing all the incoming and ongoing connections into and from this node.</p>
<blockquote>
<div><ul class="simple">
<li>Assuming that you have already created your project:</li>
<li>Enter the <cite>Connectivity</cite> area and click on <cite>Long Range Connectivity</cite>.</li>
<li>Select the default connectivity matrix and click the <cite>Launch</cite> button.</li>
<li>On the right side the node-by-node connectivity matrix is displayed. You
can select the quadrant to be displayed on the screen by accessing the
quadrant selector.</li>
<li>Unselect the nodes you want to lesion by clicking directly on the region
labels. This will remove all the incoming and ongoing connections into
and from those nodes. Here we choose to lesion the following cortical
areas: lCCA, lCCP, and lPFCORB.</li>
<li>Enter a name for this new selection, save it  and click on the star icon
on the top-right to save the new matrix.</li>
<li>Go to <cite>Project</cite> area and enter the <cite>Data Structure</cite> page. The new
connectivity matrix should be available in Intermediate Data.</li>
<li>By selecting the new Connectivity, you will access its Datatype
Details allowing you to get information about the data, visualize them
and export them.</li>
<li>From the <cite>Visualizers</cite> tab you can launch a display to see the new matrix.</li>
<li>Simulate data using both connectivity matrices. You can now use the new
connectivity matrix to simulate brain activity, using the TVB <cite>Simulator</cite>.
Here we choose the BOLD model with underlying FitzHugh-Nagumo equations for
the local dynamics. The goal is to run two long simulations, one using an
intact connectivity and another using the connectivity with lesions. Except
for the connectivity matrix, all parameters are the same (including the
random number generator seed).<ul>
<li>In the <cite>Simulator</cite> area - central column - you can choose the long-range
connectivity. Select the new connectivity matrix containing the lesions.</li>
<li>Set the local dynamic model to Fitz-Hugh Nagumo.</li>
<li>Select BOLD in Monitors.</li>
<li>Name the new simulation and launch it.</li>
<li>Repeat the previous steps but choosing the default matrix (intact) as the
Long-range connectivity.</li>
</ul>
</li>
<li>Go to the <cite>Operations</cite> board. You can follow the state of the simulations.
When simulations are finished your results will be represented by its
datatype icons.</li>
<li>Export the results of both simulations and the connectivity matrices.<ul>
<li>You can export the results by choosing <cite>Export</cite>: -&gt; TVB format. The data
will be stored in an HDF5 file (&#8220;filename.h5&#8221;) which can be used to do
further analysis using other software of your choice.</li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Here we choose MatLab to process the data. To read the HDF5 file in MatLab do:</p>
<div class="highlight-python"><pre>hinfo = hdf5info('filename.h5');
% hinfo is a structure containing the data in the field
% hinfo.GroupHierarchy.Datasets.</pre>
</div>
<p>To read the data use the <cite>hdf5read</cite> function. For our simulations
<cite>hinfo.GroupHierarchy.Datasets(1)</cite> contains the BOLD activity and
<cite>hinfo.GroupHierarchy.Datasets(2)</cite> contains the time:</p>
<div class="highlight-python"><pre>Time  = hdf5read(hinfo.GroupHierarchy.Datasets(2));
bold  = hdf5read(hinfo.GroupHierarchy.Datasets(1));
N     = size(bold,2);
T     = size(bold,4);
% Where N is the number of cortical areas (=74) and T the number of time
% points.</pre>
</div>
<p>You can compact the data to a 2-dimension matrix as:</p>
<div class="highlight-python"><pre>bold_new = zeros(T,N,2);
bold_new(:,:,1) = reshape(bold,[T N]);</pre>
</div>
<p>You are now ready to work with <cite>bold_new</cite> using the tools of MatLab.</p>
<p><strong>Results</strong></p>
<p>For each condition, intact and lesion, we calculated the correlation matrix
(functional connectivity) and evaluated whether correlations change in pairs
of nodes. To asses significant changes we calculated the correlation matrix
in non-overlapping time windows of 200 time points. In this way, we obtained
a distribution for each pair-wise correlation coefficient, allowing
statistical treatment. Correlation coefficients were fisher z-transformed and
compared (by means of t-tests) in intact vs. lesion conditions. We found that lesions
induced both significant increases and decreases of correlations between
intact nodes, even for pairs of nodes in different hemispheres.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="_images/tutorial_lesion_results.jpg" src="_images/tutorial_lesion_results.jpg" style="width: 40%;" />
</div>
<p>A) Top: Intact connectivity matrix. Middle: Connectivity matrix with
lesions. Bottom: Difference between intact and injured connectivity
matrices. Connection strengths are indicated in color code.
B) Top: Intact functional connectivity. Middle: Functional connectivity with
lesions. Pearson pair-wise correlation coefficients are indicated in
color code. Bottom: Significantly different pair-wise correlations in
intact vs. lesion conditions (squares are proportional to correlation
difference). Black: lesion significantly decreased correlation
coefficient with respect to intact correlations. Gray: lesion
significantly increased correlation coefficient with respect to intact
correlations.
C) Example of seed-based based correlations. Dark and
light colors indicate significant and non-significant differences of
correlation coefficients, respectively. Seed: left prefrontal polar cortex.</p>
</div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="web_interface.html">web interface</a>|&nbsp;</li>
	<li><a href="console_interface.html">console interface</a>|&nbsp;</li>
	<li><a href="api.html">API</a>|&nbsp;</li>
	<li><a href="developer.html">Developer</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, timpx.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>